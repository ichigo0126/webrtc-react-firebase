(this["webpackJsonpreact-app"]=this["webpackJsonpreact-app"]||[]).push([[0],{108:function(e,t,n){"use strict";n.r(t);var r=n(4),a=n(0),c=n.n(a),i=n(14),s=n.n(i),o=(n(95),n(8)),u=n.n(o),l=n(12),f=n(18),d=n(144),h=n(143),p=n(151),b=n(140),m=n(152),j=n(110),v=n(141),O=n(142);function x(){return Object(r.jsxs)(j.a,{variant:"body2",color:"textSecondary",align:"center",children:["Copyright \xa9 ",Object(r.jsx)(b.a,{color:"inherit",href:"https://www.udemy.com/user/ham-san/",children:"\u306f\u3080\u3055\u3093"})," ",(new Date).getFullYear(),"."]})}var k=Object(v.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}}));function w(e){var t=e.rtcClient,n="\u3042\u306a\u305f\u306e\u540d\u524d",c=k(),i=Object(a.useState)(!0),s=Object(f.a)(i,2),o=s[0],b=s[1],v=Object(a.useState)(""),w=Object(f.a)(v,2),y=w[0],C=w[1],g=Object(a.useState)(!1),A=Object(f.a)(g,2),P=A[0],E=A[1];Object(a.useEffect)((function(){b(""===y)}),[y]);var R=Object(a.useCallback)(function(){var e=Object(l.a)(u.a.mark((function e(n){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.startListening(y);case 2:n.preventDefault();case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[y,t]);return""!==t.localPeerName?Object(r.jsx)(r.Fragment,{}):Object(r.jsxs)(O.a,{component:"main",maxWidth:"xs",children:[Object(r.jsx)(h.a,{}),Object(r.jsxs)("div",{className:c.paper,children:[Object(r.jsxs)(j.a,{component:"h1",variant:"h5",children:[n,"\u3092\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044"]}),Object(r.jsxs)("form",{className:c.form,noValidate:!0,children:[Object(r.jsx)(p.a,{autoFocus:!0,fullWidth:!0,label:n,margin:"normal",name:"name",onChange:function(e){return C(e.target.value)},onCompositionEnd:function(){return E(!1)},onCompositionStart:function(){return E(!0)},onKeyDown:function(){var e=Object(l.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!P){e.next=2;break}return e.abrupt("return");case 2:if(""!==t.target.value){e.next=4;break}return e.abrupt("return");case 4:if("Enter"!==t.key){e.next=7;break}return e.next=7,R(t);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),required:!0,value:y,variant:"outlined"}),Object(r.jsx)(d.a,{className:c.submit,color:"primary",disabled:o,fullWidth:!0,onClick:function(){var e=Object(l.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),type:"submit",variant:"contained",children:"\u6c7a\u5b9a"})]})]}),Object(r.jsx)(m.a,{mt:8,children:Object(r.jsx)(x,{})})]})}function y(){return Object(r.jsxs)(j.a,{variant:"body2",color:"textSecondary",align:"center",children:["Copyright \xa9 ",Object(r.jsx)(b.a,{color:"inherit",href:"https://www.udemy.com/user/ham-san/",children:"\u306f\u3080\u3055\u3093"})," ",(new Date).getFullYear(),"."]})}var C=Object(v.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}}));function g(e){var t=e.rtcClient,n="\u76f8\u624b\u306e\u540d\u524d",c=C(),i=Object(a.useState)(!0),s=Object(f.a)(i,2),o=s[0],b=s[1],v=Object(a.useState)(""),x=Object(f.a)(v,2),k=x[0],w=x[1],g=Object(a.useState)(!1),A=Object(f.a)(g,2),P=A[0],E=A[1];Object(a.useEffect)((function(){b(""===k)}),[k]);var R=Object(a.useCallback)(function(){var e=Object(l.a)(u.a.mark((function e(n){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.connect(k);case 2:n.preventDefault();case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[k,t]);return""===t.localPeerName||""!==t.remotePeerName?Object(r.jsx)(r.Fragment,{}):Object(r.jsxs)(O.a,{component:"main",maxWidth:"xs",children:[Object(r.jsx)(h.a,{}),Object(r.jsxs)("div",{className:c.paper,children:[Object(r.jsxs)(j.a,{component:"h1",variant:"h5",children:[n,"\u3092\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044"]}),Object(r.jsxs)("form",{className:c.form,noValidate:!0,children:[Object(r.jsx)(p.a,{autoFocus:!0,fullWidth:!0,label:n,margin:"normal",name:"name",onChange:function(e){return w(e.target.value)},onCompositionEnd:function(){return E(!1)},onCompositionStart:function(){return E(!0)},onKeyDown:function(){var e=Object(l.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!P){e.next=2;break}return e.abrupt("return");case 2:if(""!==t.target.value){e.next=4;break}return e.abrupt("return");case 4:if("Enter"!==t.key){e.next=7;break}return e.next=7,R(t);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),required:!0,value:k,variant:"outlined"}),Object(r.jsx)(d.a,{className:c.submit,color:"primary",disabled:o,fullWidth:!0,onClick:function(){var e=Object(l.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),type:"submit",variant:"contained",children:"\u6c7a\u5b9a"})]})]}),Object(r.jsx)(m.a,{mt:8,children:Object(r.jsx)(y,{})})]})}var A=function(e){var t=e.rtcClient;return null===t?Object(r.jsx)(r.Fragment,{}):Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(w,{rtcClient:t}),Object(r.jsx)(g,{rtcClient:t})]})},P=n(150),E=n(146),R=n(147),S=n(148),_=n(149),T=n(25),D=n(26),N=n(50),I=n(53),F=n(51),B=n(72),L=function(e){Object(I.a)(n,e);var t=Object(F.a)(n);function n(e){var r;return Object(T.a)(this,n),(r=t.call(this,e)).canvas=c.a.createRef(),r}return Object(D.a)(n,[{key:"componentDidUpdate",value:function(){this.draw()}},{key:"draw",value:function(){var e=this.props.audioData,t=this.canvas.current,n=t.height,r=t.width,a=t.getContext("2d"),c=0,i=1*r/e.length;a.lineWidth=2,a.strokeStyle="#000000",a.clearRect(0,0,r,n),a.beginPath(),a.moveTo(0,n/2);var s,o=Object(B.a)(e);try{for(o.s();!(s=o.n()).done;){var u=s.value/255*n;a.lineTo(c,u),c+=i}}catch(l){o.e(l)}finally{o.f()}a.lineTo(c,n/2),a.stroke()}},{key:"render",value:function(){return Object(r.jsx)("canvas",{width:this.props.width,height:"60",ref:this.canvas})}}]),n}(a.Component),U=function(e){Object(I.a)(n,e);var t=Object(F.a)(n);function n(e){var r;return Object(T.a)(this,n),(r=t.call(this,e)).state={audioData:new Uint8Array(0)},r.tick=r.tick.bind(Object(N.a)(r)),r}return Object(D.a)(n,[{key:"componentDidMount",value:function(){this.audioContext=new(window.AudioContext||window.webkitAudioContext),this.analyser=this.audioContext.createAnalyser(),this.dataArray=new Uint8Array(this.analyser.frequencyBinCount),this.source=this.audioContext.createMediaStreamSource(this.props.audio),this.source.connect(this.analyser),this.rafId=requestAnimationFrame(this.tick)}},{key:"tick",value:function(){this.analyser.getByteTimeDomainData(this.dataArray),this.setState({audioData:this.dataArray}),this.rafId=requestAnimationFrame(this.tick)}},{key:"componentWillUnmount",value:function(){cancelAnimationFrame(this.rafId),this.analyser.disconnect(),this.source.disconnect()}},{key:"render",value:function(){return Object(r.jsx)(L,{audioData:this.state.audioData,width:this.props.width})}}]),n}(a.Component),M=n(145),W=n(73),V=n.n(W),K=n(74),G=n.n(K),H=Object(v.a)({icon:{height:38,width:38}}),J=function(e){var t=e.isLocal,n=e.muted,a=e.refVolumeButton,c=e.rtcClient,i=e.setMuted,s=n?V.a:G.a,o=H();return Object(r.jsx)(M.a,{"aria-label":"switch mute",onClick:function(){i((function(e){return!e})),t&&c.toggleAudio()},ref:a,children:Object(r.jsx)(s,{className:o.icon})})},q={width:0,height:0},Y=function(e){var t=Object(a.useState)({width:0,height:0}),n=Object(f.a)(t,2),r=n[0],c=n[1],i=e.current,s=function(e){return null===e?q:{width:e.offsetWidth,height:e.offsetHeight}};return r=s(i),Object(a.useEffect)((function(){var e=function(){c(s(i))};window.removeEventListener("resize",e),window.addEventListener("",e)}),[i]),r},z=function(e){var t=e.isLocal,n=e.name,c=e.rtcClient,i=e.videoRef,s=Object(a.useState)(c.initialAudioMuted),o=Object(f.a)(s,2),u=o[0],l=o[1],d=Object(a.useRef)(null),h=Y(d),p=Object(a.useRef)(null),b=Y(p);return i.current&&console.log({isLocal:t,srcObject:i.current.srcObject}),Object(r.jsxs)(E.a,{ref:d,children:[Object(r.jsxs)(R.a,{children:[Object(r.jsx)("video",{autoPlay:!0,muted:t||u,ref:i,width:h.width}),Object(r.jsx)(S.a,{children:Object(r.jsx)(j.a,{gutterBottom:!0,variant:"h5",component:"h2",children:n})})]}),Object(r.jsxs)(_.a,{children:[Object(r.jsx)(J,{isLocal:t,muted:u,refVolumeButton:p,rtcClient:c,setMuted:l}),!u&&i.current&&i.current.srcObject&&Object(r.jsx)(U,{audio:i.current.srcObject,width:h.width-b.width-40})]})]})},Q=function(e){var t=e.rtcClient,n=Object(a.useRef)(null),c=n.current,i=t.mediaStream;return Object(a.useEffect)((function(){if(null!==c){!function(){try{c.srcObject=i}catch(e){console.error(e)}}()}}),[c,i]),console.log({rtcClient:t}),""===t.localPeerName||""===t.remotePeerName?Object(r.jsx)(r.Fragment,{}):Object(r.jsx)(z,{isLocal:!0,name:t.localPeerName,rtcClient:t,videoRef:n})},X=function(e){var t=e.rtcClient,n=t.remoteVideoRef;return""===t.remotePeerName?Object(r.jsx)(r.Fragment,{}):Object(r.jsx)(z,{isLocal:!1,name:t.remotePeerName,rtcClient:t,videoRef:n})},Z=Object(v.a)((function(e){return{root:{flexGrow:1},paper:{padding:e.spacing(2),textAlign:"center",color:e.palette.text.secondary}}})),$=function(e){var t=e.rtcClient,n=Z();return null===t?Object(r.jsx)(r.Fragment,{}):Object(r.jsx)("div",{className:n.root,children:Object(r.jsxs)(P.a,{container:!0,spacing:0,children:[Object(r.jsx)(P.a,{item:!0,xs:12,sm:6,children:Object(r.jsx)(Q,{rtcClient:t})}),Object(r.jsx)(P.a,{item:!0,xs:12,sm:6,children:Object(r.jsx)(X,{rtcClient:t})})]})})},ee=n(54),te=(n(104),function(){function e(){Object(T.a)(this,e);var t=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_FIREBASE_API_KEY:"AIzaSyDOcWo6A6ceiPmymPWfT85QNVhXp61HS8o",REACT_APP_FIREBASE_AUTH_DOMAIN:"webrtc-react-firebase-6f763.firebaseapp.com",REACT_APP_FIREBASE_DATABASE_URL:"https://webrtc-react-firebase-6f763-default-rtdb.firebaseio.com",REACT_APP_FIREBASE_PROJECT_ID:"webrtc-react-firebase-6f763",REACT_APP_FIREBASE_STORAGE_BUCKET:"webrtc-react-firebase-6f763.appspot.com",REACT_APP_FIREBASE_MESSAGING_SENDER_ID:"525066174194",REACT_APP_FIREBASE_APP_ID:"1:525066174194:web:8ae4924257270829411a6b"}),n={apiKey:t.REACT_APP_FIREBASE_API_KEY,authDomain:t.REACT_APP_FIREBASE_AUTH_DOMAIN,databaseURL:t.REACT_APP_FIREBASE_DATABASE_URL,projectId:t.REACT_APP_FIREBASE_PROJECT_ID,storageBucket:t.REACT_APP_FIREBASE_STORAGE_BUCKET,messagingSenderId:t.REACT_APP_FIREBASE_MESSAGING_SENDER_ID,appId:t.REACT_APP_FIREBASE_APP_ID};0===ee.a.apps.length&&ee.a.initializeApp(n),this.database=ee.a.database(),this.localPeerName="",this.remotePeerName=""}return Object(D.a)(e,[{key:"setPeerNames",value:function(e,t){this.localPeerName=e,this.remotePeerName=t}},{key:"sendOffer",value:function(){var e=Object(l.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.targetRef.set({type:"offer",sender:this.localPeerName,sessionDescription:t});case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"sendAnswer",value:function(){var e=Object(l.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.targetRef.set({type:"answer",sender:this.localPeerName,sessionDescription:t});case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"sendCandidate",value:function(){var e=Object(l.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.targetRef.set({type:"candidate",sender:this.localPeerName,candidate:t});case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"remove",value:function(){var e=Object(l.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.database.ref(t).remove();case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"targetRef",get:function(){return this.database.ref(this.remotePeerName)}}]),e}()),ne=function(){function e(t,n){Object(T.a)(this,e);this.rtcPeerConnection=new RTCPeerConnection({iceServers:[{urls:"stun:stun.stunprotocol.org"}]}),this.firebaseSignallingClient=new te,this.localPeerName="",this.remotePeerName="",this.remoteVideoRef=t,this._setRtcClient=n,this.mediaStream=null}return Object(D.a)(e,[{key:"setRtcClient",value:function(){this._setRtcClient(this)}},{key:"getUserMedia",value:function(){var e=Object(l.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t={audio:!0,video:!0},e.next=4,navigator.mediaDevices.getUserMedia(t);case 4:this.mediaStream=e.sent,e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0);case 10:case"end":return e.stop()}}),e,this,[[0,7]])})));return function(){return e.apply(this,arguments)}}()},{key:"setMediaStream",value:function(){var e=Object(l.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getUserMedia();case 2:this.addTracks(),this.setRtcClient();case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"addTracks",value:function(){this.addAudioTrack(),this.addVideoTrack()}},{key:"addAudioTrack",value:function(){this.audioTrack.enabled=false,this.rtcPeerConnection.addTrack(this.audioTrack,this.mediaStream)}},{key:"addVideoTrack",value:function(){this.rtcPeerConnection.addTrack(this.videoTrack,this.mediaStream)}},{key:"toggleAudio",value:function(){this.audioTrack.enabled=!this.audioTrack.enabled,this.setRtcClient()}},{key:"offer",value:function(){var e=Object(l.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.createOffer();case 2:return t=e.sent,e.next=5,this.setLocalDescription(t);case 5:return e.next=7,this.sendOffer();case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"createOffer",value:function(){var e=Object(l.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.rtcPeerConnection.createOffer();case 3:return e.abrupt("return",e.sent);case 6:e.prev=6,e.t0=e.catch(0),console.error(e.t0);case 9:case"end":return e.stop()}}),e,this,[[0,6]])})));return function(){return e.apply(this,arguments)}}()},{key:"setLocalDescription",value:function(){var e=Object(l.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.rtcPeerConnection.setLocalDescription(t);case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.error(e.t0);case 8:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(t){return e.apply(this,arguments)}}()},{key:"sendOffer",value:function(){var e=Object(l.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.firebaseSignallingClient.setPeerNames(this.localPeerName,this.remotePeerName),e.next=3,this.firebaseSignallingClient.sendOffer(this.localDescription);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setOntrack",value:function(){var e=this;this.rtcPeerConnection.ontrack=function(t){if("video"===t.track.kind){var n=t.streams[0];e.remoteVideoRef.current.srcObject=n,e.setRtcClient()}},this.setRtcClient()}},{key:"answer",value:function(){var e=Object(l.a)(u.a.mark((function e(t,n){var r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,this.remotePeerName=t,this.setOnicecandidateCallback(),this.setOntrack(),e.next=6,this.setRemoteDescription(n);case 6:return e.next=8,this.rtcPeerConnection.createAnswer();case 8:return r=e.sent,e.next=11,this.rtcPeerConnection.setLocalDescription(r);case 11:return e.next=13,this.sendAnswer();case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(0),console.error(e.t0);case 18:case"end":return e.stop()}}),e,this,[[0,15]])})));return function(t,n){return e.apply(this,arguments)}}()},{key:"connect",value:function(){var e=Object(l.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.remotePeerName=t,this.setOnicecandidateCallback(),this.setOntrack(),e.next=5,this.offer();case 5:this.setRtcClient();case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"setRemoteDescription",value:function(){var e=Object(l.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.rtcPeerConnection.setRemoteDescription(t);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"sendAnswer",value:function(){var e=Object(l.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.firebaseSignallingClient.setPeerNames(this.localPeerName,this.remotePeerName),e.next=3,this.firebaseSignallingClient.sendAnswer(this.localDescription);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"saveReceivedSessionDescription",value:function(){var e=Object(l.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.setRemoteDescription(t);case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.error(e.t0);case 8:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(t){return e.apply(this,arguments)}}()},{key:"addIceCandidate",value:function(){var e=Object(l.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=new RTCIceCandidate(t),e.next=4,this.rtcPeerConnection.addIceCandidate(n);case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.error(e.t0);case 9:case"end":return e.stop()}}),e,this,[[0,6]])})));return function(t){return e.apply(this,arguments)}}()},{key:"setOnicecandidateCallback",value:function(){var e=this;this.rtcPeerConnection.onicecandidate=function(){var t=Object(l.a)(u.a.mark((function t(n){var r;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(r=n.candidate)){t.next=4;break}return t.next=4,e.firebaseSignallingClient.sendCandidate(r.toJSON());case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}},{key:"startListening",value:function(){var e=Object(l.a)(u.a.mark((function e(t){var n=this;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.localPeerName=t,this.setRtcClient(),e.next=4,this.firebaseSignallingClient.remove(t);case 4:this.firebaseSignallingClient.database.ref(t).on("value",function(){var e=Object(l.a)(u.a.mark((function e(t){var r,a,c,i,s;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==(r=t.val())){e.next=3;break}return e.abrupt("return");case 3:a=r.candidate,c=r.sender,i=r.sessionDescription,s=r.type,e.t0=s,e.next="offer"===e.t0?7:"answer"===e.t0?10:"candidate"===e.t0?13:16;break;case 7:return e.next=9,n.answer(c,i);case 9:return e.abrupt("break",18);case 10:return e.next=12,n.saveReceivedSessionDescription(i);case 12:return e.abrupt("break",18);case 13:return e.next=15,n.addIceCandidate(a);case 15:return e.abrupt("break",18);case 16:return n.setRtcClient(),e.abrupt("break",18);case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"initialAudioMuted",get:function(){return!0}},{key:"audioTrack",get:function(){return this.mediaStream.getAudioTracks()[0]}},{key:"videoTrack",get:function(){return this.mediaStream.getVideoTracks()[0]}},{key:"localDescription",get:function(){return this.rtcPeerConnection.localDescription.toJSON()}}]),e}(),re=function(){var e=Object(a.useState)(null),t=Object(f.a)(e,2),n=t[0],r=t[1],c=Object(a.useRef)(null),i=Object(a.useReducer)((function(e){return!e}),!1),s=Object(f.a)(i,2)[1],o=function(e){r(e),s()};return Object(a.useEffect)((function(){(function(){var e=Object(l.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new ne(c,o),e.next=3,t.setMediaStream();case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]),n},ae=function(){var e=re();return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(A,{rtcClient:e}),Object(r.jsx)($,{rtcClient:e})]})};s.a.render(Object(r.jsx)(ae,{}),document.getElementById("root"))},95:function(e,t,n){}},[[108,1,2]]]);
//# sourceMappingURL=main.575a660b.chunk.js.map